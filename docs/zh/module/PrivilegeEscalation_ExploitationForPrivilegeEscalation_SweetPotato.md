# SweetPotato提权

# 主要功能
模块使用SweetPotato.exe进行提权.

SweetPotato要求有本地服务权限,如IIS的Network Service

# 注意事项
部分IIS服务器是使用ApplicationPoolIdentity用户启动的,该用户为虚拟用户,无法提权.

具体现象是使用webshell可以执行命令,但是无法执行外部exe.

# 操作方法
+ 以IIS提权为例说明
+ 新增监听,生成载荷
+ 使用webshell将载荷上传到目标并执行

![1615644131257-6cfd9334-fd57-4356-b985-7ee4ea9c5108.webp](./img/vl1JveoXC2adw7Fb/1615644131257-6cfd9334-fd57-4356-b985-7ee4ea9c5108-634725.webp)

![1615644179303-038ea24d-6e78-4a36-bcfc-33b30df32f33.webp](./img/vl1JveoXC2adw7Fb/1615644179303-038ea24d-6e78-4a36-bcfc-33b30df32f33-312366.webp)

+ 此时获取到一个Network Service权限的Session

![1615644221242-b4129c1d-a8ff-4713-9fd5-62eb2ba7e6ee.webp](./img/vl1JveoXC2adw7Fb/1615644221242-b4129c1d-a8ff-4713-9fd5-62eb2ba7e6ee-386180.webp)

+ 使用生成的Session运行模块,参数依然填写运行之前上传的载荷

![1615644280924-36a91330-e112-4ab6-b0db-4a2801335b08.webp](./img/vl1JveoXC2adw7Fb/1615644280924-36a91330-e112-4ab6-b0db-4a2801335b08-577424.webp)

+ 运行模块,获取到SYSTEM权限Session

![1615644326284-d819a805-8db3-4f79-b23f-89be7dfa4fd9.webp](./img/vl1JveoXC2adw7Fb/1615644326284-d819a805-8db3-4f79-b23f-89be7dfa4fd9-980825.webp)






