# SweetPotato escalation

# Main functions

The module uses SweetPotato.exe to escalate rights.

SweetPotato requires local service permissions, such as IIS's Network Service

# Things to note

Some IIS servers are started using ApplicationPoolIdentity user, which is a virtual user and cannot raise the authority.

The specific phenomenon is that using webshell can execute commands, but cannot execute external exe.

# How to operate

+ Take IIS as an example of
+ Added listening and generated load
+ Use webshell to upload the payload to the target and execute

![1615644131257-6cfd9334-fd57-4356-b985-7ee4ea9c5108.webp](./img/vl1JveoXC2adw7Fb/1615644131257-6cfd9334-fd57-4356-b985-7ee4ea9c5108-634725.webp)

![1615644179303-038ea24d-6e78-4a36-bcfc-33b30df32f33.webp](./img/vl1JveoXC2adw7Fb/1615644179303-038ea24d-6e78-4a36-bcfc-33b30df32f33-312366.webp)

+ At this time, a session with Network Service permissions is obtained

![1615644221242-b4129c1d-a8ff-4713-9fd5-62eb2ba7e6ee.webp](./img/vl1JveoXC2adw7Fb/1615644221242-b4129c1d-a8ff-4713-9fd5-62eb2ba7e6ee-386180.webp)

+ Use the generated Session running module, and the parameters still fill in the load uploaded before the run.

![1615644280924-36a91330-e112-4ab6-b0db-4a2801335b08.webp](./img/vl1JveoXC2adw7Fb/1615644280924-36a91330-e112-4ab6-b0db-4a2801335b08-577424.webp)

+ Run the module and get the SYSTEM permission Session

![1615644326284-d819a805-8db3-4f79-b23f-89be7dfa4fd9.webp](./img/vl1JveoXC2adw7Fb/1615644326284-d819a805-8db3-4f79-b23f-89be7dfa4fd9-980825.webp)






